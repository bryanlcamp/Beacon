<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataset Generator - Beacon HFT Platform</title>
    
    <!-- Import Beacon Design System -->
    <link rel="stylesheet" href="/assets/css/main.css">
    
    <!-- Dataset Generator Modules -->
    <link rel="stylesheet" href="/command-center/apps/dataset-generator/styles/layout.css">
    <link rel="stylesheet" href="/command-center/apps/dataset-generator/styles/components.css">
    <link rel="stylesheet" href="/command-center/apps/dataset-generator/styles/forms.css">
    <link rel="stylesheet" href="/command-center/apps/dataset-generator/styles/datacards.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Beacon Title Header -->
    <header class="beacon-page-header">
        <nav class="beacon-page-nav">
            <div class="beacon-brand-header">
                <a href="/command-center/overview/index.html" class="beacon-brand-main">Beacon.</a>
                <span class="beacon-brand-separator">|</span>
                <h1 class="beacon-page-title">Dataset Generator.</h1>
            </div>
            <div class="beacon-nav-actions">
                <a href="/command-center/index.html" class="beacon-nav-back">
                    <span class="nav-arrow">‚Üê</span>
                    <span>Command Center</span>
                </a>
                <div class="beacon-search">
                    <input type="text" class="beacon-search-field" placeholder="Search">
                    <div class="beacon-search-results" id="searchResults"></div>
                </div>
                <div class="info-dropdown-container" style="position:relative;display:inline-block;margin-left:18px;vertical-align:middle;">
                    <button class="info-icon" id="infoIconBtn" aria-label="Info" tabindex="0" style="width:24px;height:24px;border-radius:50%;border:1.5px solid #fff;background:transparent;color:#ececec;display:flex;align-items:center;justify-content:center;font-size:0.95em;font-weight:900;cursor:pointer;transition:border 0.2s,background 0.2s;outline:none;padding:0;box-sizing:border-box;">
                        <span class="info-i" style="font-family:inherit;font-size:0.95em;font-weight:900;color:#ececec;user-select:none;line-height:1;letter-spacing:0.01em;text-shadow:0 0 2px #000,0 0 1px #ececec;">i</span>
                    </button>
                    <div class="info-dropdown" id="infoDropdown" style="display:none;position:absolute;right:0;top:110%;min-width:120px;background:#181828;border:1.5px solid #fff;border-radius:8px;box-shadow:0 4px 16px 0 rgba(0,0,0,0.13);z-index:100;padding:0.5em 0;text-align:left;">
                        <a href="mailto:contact@beaconhft.com" style="display:block;color:#fff;text-decoration:none;padding:0.5em 1.2em;font-size:1em;transition:background 0.18s,color 0.18s;">Contact</a>
                        <a href="/command-center/about.html" style="display:block;color:#fff;text-decoration:none;padding:0.5em 1.2em;font-size:1em;transition:background 0.18s,color 0.18s;">About</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Demo Mode Banner -->
    <div id="demo-banner" class="demo-banner" style="display: none;">
        <div class="demo-content">
            <span class="demo-icon">üé≠</span>
            <span class="demo-text">Demo Mode - Limited Functionality</span>
        </div>
    </div>

    <!-- Main Application -->
    <main class="beacon-page-content" id="app-container">

        <!-- Two-Panel Layout -->
        <div class="app-layout" role="application" aria-label="Dataset Generator">
            
            <!-- Left Panel: Configuration -->
            <section class="config-panel" aria-labelledby="config-panel-title">
                <header class="panel-header">
                    <h2 id="config-panel-title" class="sr-only">Configuration Panel</h2>
                    
                    <!-- Message Count Spinner -->
                    <div class="form-group">
                        <label for="messageCount" class="sr-only">Number of Messages</label>
                        <div class="spinner-control" data-adorner="red">
                            <input 
                                type="number" 
                                id="messageCount" 
                                class="spinner-input" 
                                placeholder="Msg Cnt"
                                min="1" 
                                step="500"
                                aria-describedby="messageCount-help"
                            >
                            <div class="spinner-buttons">
                                <button type="button" class="spinner-btn spinner-up" aria-label="Increase by 500">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="18,15 12,9 6,15"></polyline>
                                    </svg>
                                </button>
                                <button type="button" class="spinner-btn spinner-down" aria-label="Decrease by 500">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="6,9 12,15 18,9"></polyline>
                                    </svg>
                                </button>
                            </div>
                            <div class="adorner-indicator" aria-hidden="true"></div>
                        </div>
                        <div id="messageCount-help" class="sr-only">Enter number of messages to generate</div>
                    </div>

                    <!-- Exchange Selection -->
                    <div class="form-group">
                        <label for="exchangeSelect" class="sr-only">Exchange Protocol</label>
                        <select 
                            id="exchangeSelect" 
                            class="exchange-select"
                            aria-describedby="exchangeSelect-help"
                        >
                            <option value="NASDAQ" selected>NASDAQ</option>
                            <option value="NYSE">NYSE</option>
                            <option value="CME">CME</option>
                        </select>
                        <div id="exchangeSelect-help" class="sr-only">Select exchange protocol for symbols</div>
                    </div>
                    <!-- Symbol Input (moved from right panel) -->
                    <div class="form-group symbol-input-group" style="margin-top: 18px;">
                        <label for="symbolInput" class="sr-only">Enter Trading Symbol</label>
                        <div class="symbol-input-control" data-adorner="red" style="display: flex; align-items: center; gap: 8px;">
                            <input 
                                type="text" 
                                id="symbolInput" 
                                class="symbol-input" 
                                placeholder="Add Symbol (e.g. AAPL)"
                                autocomplete="off"
                                style="flex:1; min-width: 0;"
                            >
                            <button type="button" class="btn btn-primary" id="addSymbol" aria-label="Add Symbol" style="padding: 0 12px; font-size: 1.2em; height: 36px; display: flex; align-items: center; justify-content: center;">
                                +
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Config Panel Body -->
                <div class="panel-body">
                    <div class="config-actions">
                        <button type="button" class="btn btn-secondary" id="loadConfig">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14,2 14,8 20,8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10,9 9,9 8,9"></polyline>
                            </svg>
                            Load Config
                        </button>
                        
                        <button type="button" class="btn btn-secondary" id="saveConfig">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                <polyline points="17,21 17,13 7,13 7,21"></polyline>
                                <polyline points="7,3 7,8 15,8"></polyline>
                            </svg>
                            Save Config
                        </button>
                        
                        <button type="button" class="btn btn-secondary" id="newConfig">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                                <polyline points="14,2 14,8 20,8"></polyline>
                                <line x1="12" y1="18" x2="12" y2="12"></line>
                                <line x1="9" y1="15" x2="15" y2="15"></line>
                            </svg>
                            New Config
                        </button>
                        
                        <button type="button" class="btn btn-primary" id="generateDataset">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
                            </svg>
                            Generate
                        </button>
                    </div>
                </div>
            </section>

            <!-- Right Panel: DataCards -->
            <section class="datacards-panel" aria-labelledby="datacards-panel-title">
                <header class="panel-header">
                    <h2 id="datacards-panel-title" class="sr-only">Symbol Configuration Panel</h2>
                </header>
                <!-- Datacard container for dynamic datacards -->
                <div id="datacardContainer" class="datacard-container" style="margin-top: 18px;"></div>
            </section>        </div>
    </main>

    <!-- Load Dataset Generator Application -->
    <script type="module">
        import { DatasetGeneratorApp } from '/command-center/apps/dataset-generator/js/DatasetGeneratorApp.js';
        
        // Initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const app = new DatasetGeneratorApp();
                await app.initialize();
                
                // Make app globally accessible for debugging
                window.datasetGeneratorApp = app;
                
                console.log('‚úÖ Dataset Generator Application loaded successfully');
            } catch (error) {
                console.error('‚ùå Failed to initialize Dataset Generator:', error);
            }
        });
    </script>
    
    <!-- Info Dropdown Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var infoBtn = document.getElementById('infoIconBtn');
            var dropdown = document.getElementById('infoDropdown');
            if (!infoBtn || !dropdown) return;
            
            infoBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                dropdown.style.display = (dropdown.style.display === 'block') ? 'none' : 'block';
            });
            
            document.addEventListener('click', function(e) {
                if (!infoBtn.contains(e.target) && !dropdown.contains(e.target)) {
                    dropdown.style.display = 'none';
                }
            });
            
            infoBtn.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') dropdown.style.display = 'none';
            });
        });
    </script>
</body>
</html>