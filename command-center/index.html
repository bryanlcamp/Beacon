<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beacon</title>
    <link rel="stylesheet" href="/assets/css/common/page-gradients/navy-page-gradient.css">
    <link rel="stylesheet" href="/assets/fonts/inter/inter-local.css">
    
    <!-- Reusable Components -->
    <link rel="stylesheet" href="/assets/css/components/glass-panels.css">
    <link rel="stylesheet" href="/assets/css/components/interactive-icons.css">
    <link rel="stylesheet" href="/assets/css/components/typography.css">
    <link rel="stylesheet" href="/assets/css/components/dropdowns.css">
    <link rel="stylesheet" href="/assets/css/animations/core-animations.css">
    
    <!-- Page-specific styles -->
    <link rel="stylesheet" href="/assets/css/pages/command-center/command-center-utilities.css">
    <link rel="stylesheet" href="/assets/css/pages/command-center/command-center-author-panel.css">
    <link rel="stylesheet" href="/assets/css/pages/command-center/command-center-pulse-panel.css">
    <link rel="stylesheet" href="/assets/css/pages/command-center/command-center-core-panel.css">
    <link rel="stylesheet" href="/assets/css/pages/command-center/command-center-match-panel.css">
    <link rel="stylesheet" href="/assets/css/pages/command-center/command-center-layout.css">
    <link rel="stylesheet" href="/assets/css/pages/command-center/command-center-base.css">    
</head>
<body>

<div style="display:flex;align-items:flex-start;gap:3em;margin-left:2.5em;margin-right:2.5em;">
    <div class="main-content">
        <div class="main-glass-panel" style="margin-top: 6em;">
            <div style="text-align:left;">
                <h1 class="title" style="text-align:left;">
                    <span>Beacon.</span>
                </h1>
                <div class="main-desc" style="text-align:left;">
                    Beacon is your guide to creating winning HFT strategies.<br><br>

                    The Author's simple UI lets you create the market dataset used for 
                    bid/ask prices and liquidity.<br><br>
                    The Pulse UI allows you to choose one of your market datasets and 
                    "play" it to your strategy with different speeds, spike/wave patterns.<br><br>
                    The Core container hosts your strategy which is built using the 
                    strategy API. Examples provided. Your strategy receives prices, trades, 
                    two-way communication, and competition.<br><br>
                    Smart Defaults. Granular, low-level sophistication.
                    <br><br>
                    <span style="color:#6bb6ff;font-weight:600;">Check viability. Build. Iterate. Scale.<br><br></span>
                </div>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <div class="sidebar-panel" style="margin-top: 9em;">
            <!-- Utility Section -->
            <div class="utility-section">
                <div class="utility-icon" style="position: relative;">
                    <img src="/assets/images/icons/info-orange.svg" alt="Information" style="width:32px;height:32px;" />
                    <div class="info-dropdown">
                        <button class="dropdown-link" onclick="window.location.href='mailto:info@beaconhft.com'">Contact</button>
                        <button class="dropdown-link" onclick="window.location.href='about.html'">About</button>
                    </div>
                </div>
                <div class="utility-icon" style="position: relative;">
                    <img src="/assets/images/icons/search-orange.svg" alt="Search" style="width:32px;height:32px;" />
                    <div class="search-dropdown">
                        <input type="text" class="search-input" placeholder="Type to search..." />
                    </div>
                </div>
            </div>
            
            <!-- Section Separator -->
            <div class="section-separator"></div>
            
            <!-- System Section -->
            <div class="sidebar-icon" tabindex="0">
                <img src="/assets/images/icons/dataset.svg" alt="Author." style="width:32px;height:32px;" />
                <div class="author-panel">
                    <div style="position: relative;">
                        <button onclick="window.location.href='apps/author/index.html'" style="position: absolute; right: 0; top: 0; background: #23234a; color: white; border: none; border-radius: 6px; padding: 0.5em 1em; font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 0.85em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; z-index: 10;">Demo.</button>
                        <h2 class="title" style="margin:0 0 0.5em 0;letter-spacing:-0.03em;font-family:'Inter','Segoe UI',Arial,sans-serif;font-size:1.8em;font-weight:900;color:#fff;">Author.</h2>
                    </div>
                    <h3 style="margin:0 0 0.8em 0;font-size:1.15em;font-weight:600;color:#6bb6ff;opacity:0.95;font-family:'Inter','Segoe UI',Arial,sans-serif;">Dataset Creation & Management.</h3>
                    
                    <div style="background:rgba(107, 182, 255, 0.1);border-radius:12px;padding:1.2em;margin:1.5em 0;border-left:3px solid #6bb6ff;">
                        <h4 style="margin:0 0 0.6em 0;color:#6bb6ff;font-size:0.9em;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;font-family:'Inter','Segoe UI',Arial,sans-serif;">Key Features</h4>
                        <ul style="margin:0;padding-left:1em;color:#f5f7fa;line-height:1.8;font-size:0.95em;font-family:'Inter','Segoe UI',Arial,sans-serif;">
                            <li>Add products and allocate message counts.</li>
                            <li>Control price, qty, spread, volatility & trend.</li>
                            <li>Native exchange message format.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="sidebar-connector"></div>
            <div class="sidebar-icon" tabindex="0">
                <img src="/assets/images/icons/playback.svg" alt="Pulse." style="width:32px;height:32px;" />
                <div class="pulse-panel">
                    <div style="position: relative;">
                        <button onclick="window.location.href='apps/pulse/index.html'" style="position: absolute; right: 0; top: 0; background: #23234a; color: white; border: none; border-radius: 6px; padding: 0.5em 1em; font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 0.85em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; z-index: 10;">Demo.</button>
                        <h2 style="margin:0 0 0.5em 0;font-size:1.8em;font-weight:900;color:#fff;letter-spacing:-0.03em;font-family:'Inter','Segoe UI',Arial,sans-serif;">Pulse.</h2>
                    </div>
                    <h3 style="margin:0 0 0.8em 0;font-size:1.15em;font-weight:600;color:#6bb6ff;opacity:0.95;font-family:'Inter','Segoe UI',Arial,sans-serif;">Broadcast Datasets.</h3>
                    
                    <div style="background:rgba(107, 182, 255, 0.1);border-radius:12px;padding:1.2em;margin:1.5em 0;border-left:3px solid #6bb6ff;">
                        <h4 style="margin:0 0 0.6em 0;color:#6bb6ff;font-size:0.9em;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;font-family:'Inter','Segoe UI',Arial,sans-serif;">Key Features</h4>
                        <ul style="margin:0;padding-left:1em;color:#f5f7fa;line-height:1.8;font-size:0.95em;font-family:'Inter','Segoe UI',Arial,sans-serif;">
                            <li>Native CME, NASDAQ & NYSE.</li>
                            <li>Simulate abnormal behavior.</li>
                            <li>Receive trades from Match.</li>                            
                        </ul>
                    </div>
                </div>
            </div>
            <div class="sidebar-connector"></div>
            <div class="sidebar-icon" tabindex="0">
                <img src="/assets/images/icons/puzzle.svg" alt="Core." style="width:32px;height:32px;" />
                <div class="core-panel">
                    <div style="position: relative;">
                        <button onclick="window.location.href='apps/core/strategy-api.html'" style="position: absolute; right: 0; top: 0; background: #23234a; color: white; border: none; border-radius: 6px; padding: 0.5em 1em; font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 0.85em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; z-index: 10;">Demo.</button>
                        <h2 style="margin:0 0 0.5em 0;font-size:1.8em;font-weight:900;color:#fff;letter-spacing:-0.03em;font-family:'Inter','Segoe UI',Arial,sans-serif;">Strategy API.</h2>
                    </div>
                    <h3 style="margin:0 0 0.8em 0;font-size:1.15em;font-weight:600;color:#6bb6ff;opacity:0.95;font-family:'Inter','Segoe UI',Arial,sans-serif;">Example Strategy Implementation</h3>
                    
                    <div style="background:rgba(0,0,0,0.2);border-radius:8px;padding:0.8em;margin:0.8em 0;border-left:2px solid #6bb6ff;text-align:center;">
                        <img src="/assets/images/screenshots/strategy-api-preview.png" alt="Strategy API Interface" style="width:100%;max-width:400px;border-radius:6px;opacity:0.9;" />
                        <p style="margin:0.5em 0 0 0;font-size:0.75em;color:rgba(255,255,255,0.7);">Strategy development interface</p>
                    </div>
                    
                    <div class="code-scroll" style="background:rgba(0,0,0,0.3);border-radius:8px;padding:0.8em;margin:0.8em 0;border-left:2px solid #6bb6ff;max-height:320px;overflow-y:auto;">
                        <pre style="margin:0;font-family:'Fira Code','Courier New',monospace;font-size:0.7em;line-height:1.3;color:#f5f7fa;white-space:pre-wrap;"><code style="font-size:0.7em;">#pragma once

#include &lt;beacon_strategy&gt;
#include &lt;beacon_order&gt;

// - Namespace abbreviations for readability.
namespace bs = beacon_strategy;
namespace bo = beacon_order;

// - overrides are for template/concepts.
// - Some pointer intialization omitted for clarity.

class ExampleStrategy : public bs::StrategyBase {
public:
    // - Opportunity to read your own .json.
    explicit ExampleStrategy(const nlohmann::json& config) : bs::StrategyBase(config) {}

    void onMarketDataReceived(const bo::MarketMessage& msg) override {
        /* Market Data Thread. */        
        _reusedOrder.reset();

        /* Strategy Implementation */
        /* 
    }
    void onOrderConfirmed(const bo::Order& order) override {
        /* Matching Engine Thread. */
        _reusedOrder.status = OrderStatus.Working;

        /* Strategy Implementation */
    }
    void onOrderFilled(const bo::OrderFill& fill) override {}
    void onOrderRejected(const bo::OrderRequest& req) override {}
    void onExchangeMessageReceived(const bo::ExchangeMessage& msg) override {}

private:
    // - All messaging between the strategy and matching engine.
    // - Ownership is implementation-specific.
    std::unique_ptr&lt;bo::OrderManager&gt; _orderManager;

    // - Reused for cache locality purposes.
    bo::Order _reusedOrder;
};

// - For static template polymorphism.
REGISTER_ALGORITHM(ExampleStrategy);</code></pre>
                    </div>
                </div>
            </div>
            <div class="sidebar-connector"></div>
            <div class="sidebar-icon" tabindex="0">
                <img src="/assets/images/icons/match.svg" alt="Match." style="width:32px;height:32px;" />
                <div class="match-panel">
                    <div style="position: relative;">
                        <button onclick="window.location.href='apps/match/index.html'" style="position: absolute; right: 0; top: 0; background: #23234a; color: white; border: none; border-radius: 6px; padding: 0.5em 1em; font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 0.85em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; z-index: 10;">Demo.</button>
                        <h2 style="margin:0 0 0.5em 0;font-size:1.8em;font-weight:900;color:#fff;letter-spacing:-0.03em;font-family:'Inter','Segoe UI',Arial,sans-serif;">Match.</h2>
                    </div>
                    <h3 style="margin:0 0 0.8em 0;font-size:1.15em;font-weight:600;color:#6bb6ff;opacity:0.95;font-family:'Inter','Segoe UI',Arial,sans-serif;">True Market Competition.</h3>
                    
                    <div style="background:rgba(107, 182, 255, 0.1);border-radius:12px;padding:1.2em;margin:1.5em 0;border-left:3px solid #6bb6ff;">
                        <h4 style="margin:0 0 0.6em 0;color:#6bb6ff;font-size:0.9em;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;font-family:'Inter','Segoe UI',Arial,sans-serif;">Key Features</h4>
                        <ul style="margin:0;padding-left:1em;color:#f5f7fa;line-height:1.8;font-size:0.95em;font-family:'Inter','Segoe UI',Arial,sans-serif;">
                            <li>Realistic latency simulation.</li>
                            <li>Market impact modeling based on your dataset.</li>
                            <li>Run multiple strategies at once.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add double-click handler to Match panel
    const matchPanel = document.querySelector('.match-panel');
    if (matchPanel) {
        matchPanel.addEventListener('dblclick', function(e) {
            e.preventDefault();
            window.location.href = 'overview/match-explained.html';
        });
        
        // Add cursor pointer to indicate it's clickable
        matchPanel.style.cursor = 'pointer';
    }
    
    // Add click handler to Match icon for the app
    const matchIcon = document.querySelector('.sidebar-icon:has(img[alt="Match."])');
    if (matchIcon) {
        matchIcon.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'apps/match/index.html';
        });
        
        // Add cursor pointer to indicate it's clickable
        matchIcon.style.cursor = 'pointer';
    }
    
    // Add click handler to Author panel
    const authorIcon = document.querySelector('.sidebar-icon:has(img[alt="Author."])');
    if (authorIcon) {
        authorIcon.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'apps/author/index.html';
        });
        
        // Add cursor pointer to indicate it's clickable
        authorIcon.style.cursor = 'pointer';
    }
    
    // Add click handler to Pulse panel
    const pulseIcon = document.querySelector('.sidebar-icon:has(img[alt="Pulse."])');
    if (pulseIcon) {
        pulseIcon.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'apps/pulse/index.html';
        });
        
        // Add cursor pointer to indicate it's clickable
        pulseIcon.style.cursor = 'pointer';
    }
    
    // Add click handler to Core panel
    const coreIcon = document.querySelector('.sidebar-icon:has(img[alt="Core."])');
    if (coreIcon) {
        coreIcon.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'apps/core/strategy-api.html';
        });
        
        // Add cursor pointer to indicate it's clickable
        coreIcon.style.cursor = 'pointer';
    }    
    // Info dropdown functionality
    const infoIcon = document.querySelector('.utility-icon[style*="position: relative"]');
    const infoDropdown = document.querySelector('.info-dropdown');
    
    if (infoIcon && infoDropdown) {
        infoIcon.addEventListener('click', function(e) {
            e.stopPropagation();
            const isVisible = infoDropdown.classList.contains('show');
            
            // Close all other dropdowns
            document.querySelectorAll('.info-dropdown, .search-dropdown').forEach(dropdown => {
                dropdown.classList.remove('show');
            });
            
            if (!isVisible) {
                infoDropdown.classList.add('show');
            }
        });
    }
    
    // Search dropdown functionality
    const searchIcon = document.querySelectorAll('.utility-icon[style*="position: relative"]')[1];
    const searchDropdown = document.querySelector('.search-dropdown');
    
    if (searchIcon && searchDropdown) {
        searchIcon.addEventListener('click', function(e) {
            e.stopPropagation();
            const isVisible = searchDropdown.classList.contains('show');
            
            // Close all other dropdowns
            document.querySelectorAll('.info-dropdown, .search-dropdown').forEach(dropdown => {
                dropdown.classList.remove('show');
            });
            
            if (!isVisible) {
                searchDropdown.classList.add('show');
                // Focus search input and setup listeners
                setTimeout(() => {
                    const searchInput = searchDropdown.querySelector('.search-input');
                    if (searchInput) {
                        searchInput.focus();
                        // Setup search listeners if not already done
                        if (!searchInput.hasAttribute('data-listeners-attached')) {
                            setupSearchListeners(searchInput);
                            searchInput.setAttribute('data-listeners-attached', 'true');
                        }
                    }
                }, 100);
            }
        });
    }
    
    // Close dropdowns when clicking outside
    document.addEventListener('click', function() {
        document.querySelectorAll('.info-dropdown, .search-dropdown').forEach(dropdown => {
            dropdown.classList.remove('show');
        });
    });
    
    // Prevent dropdowns from closing when clicking inside them
    document.querySelectorAll('.info-dropdown, .search-dropdown').forEach(dropdown => {
        dropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    });
    
    // Search functionality
    let searchIndex = null;
    
    // Load search index
    fetch('/assets/search-index.json')
        .then(response => response.json())
        .then(data => {
            searchIndex = data;
        })
        .catch(error => {
            console.warn('Search index not available:', error);
        });
    
    // Handle search input
    function setupSearchListeners(searchInput) {
        let searchTimeout;
        searchInput.addEventListener('input', function(e) {
            clearTimeout(searchTimeout);
            const query = e.target.value.trim().toLowerCase();
            
            if (query.length < 2) {
                hideSearchResults();
                return;
            }
            
            searchTimeout = setTimeout(() => {
                performSearch(query);
            }, 300);
        });
        
        searchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.search-dropdown').forEach(dropdown => {
                    dropdown.classList.remove('show');
                });
            }
        });
    }
    
    // Also try to setup listeners on page load for any existing search inputs
    const searchInput = document.querySelector('.search-input');
    if (searchInput && !searchInput.hasAttribute('data-listeners-attached')) {
        setupSearchListeners(searchInput);
        searchInput.setAttribute('data-listeners-attached', 'true');
    }
    
    function performSearch(query) {
        if (!searchIndex) return;
        
        const results = searchIndex.filter(item => 
            item.title.toLowerCase().includes(query) ||
            item.content.toLowerCase().includes(query) ||
            item.snippet.toLowerCase().includes(query)
        ).slice(0, 5);
        
        displaySearchResults(results, query);
    }
    
    function displaySearchResults(results, query) {
        const searchDropdown = document.querySelector('.search-dropdown');
        if (!searchDropdown) return;
        
        // Remove existing results
        const existingResults = searchDropdown.querySelector('.search-results');
        if (existingResults) {
            existingResults.remove();
        }
        
        if (results.length === 0) {
            const noResults = document.createElement('div');
            noResults.className = 'search-results';
            noResults.innerHTML = `<p style="margin: 0.5em 0; color: rgba(255,255,255,0.6); font-size: 0.9em;">No results found for "${query}"</p>`;
            searchDropdown.appendChild(noResults);
            return;
        }
        
        const resultsContainer = document.createElement('div');
        resultsContainer.className = 'search-results';
        resultsContainer.style.cssText = 'margin-top: 0.8em; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 0.8em;';
        
        results.forEach(result => {
            const resultItem = document.createElement('a');
            resultItem.href = result.url.startsWith('/') ? result.url : '/' + result.url;
            resultItem.className = 'search-result-item';
            resultItem.style.cssText = 'display: block; padding: 0.6em 0.4em; text-decoration: none; color: #fff; border-radius: 6px; margin-bottom: 0.3em; transition: background 0.2s;';
            
            resultItem.innerHTML = `
                <div style="font-weight: 600; font-size: 0.9em; margin-bottom: 0.2em; color: #6bb6ff;">${result.title}</div>
                <div style="font-size: 0.8em; color: rgba(255,255,255,0.7); line-height: 1.3;">${result.snippet}</div>
            `;
            
            resultItem.addEventListener('mouseenter', function() {
                this.style.background = '#23234a';
            });
            
            resultItem.addEventListener('mouseleave', function() {
                this.style.background = 'transparent';
            });
            
            resultsContainer.appendChild(resultItem);
        });
        
        searchDropdown.appendChild(resultsContainer);
    }
    
    function hideSearchResults() {
        const existingResults = document.querySelector('.search-results');
        if (existingResults) {
            existingResults.remove();
        }
    }});
</script>
</body>
</html>
