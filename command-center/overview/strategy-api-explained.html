
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategy API.</title>
        <link rel="stylesheet" href="/assets/css/modules/variables.css">
        <link rel="stylesheet" href="/assets/css/modules/reset.css">
        <link rel="stylesheet" href="/assets/css/modules/header-nav.css">
        <style>
                        html, body {
                          min-height: 100vh;
                          height: auto;
                          overflow-y: auto !important;
                        }
                        .beacon-code-panel {
                          overflow: visible !important;
                          max-height: none !important;
                        }
                  /* Force smaller code font size for the code panel */
                  .beacon-code-panel, .beacon-code-panel * {
                    font-size: 0.85rem !important;
                  }
            .beacon-code-panel {
                /* allow panel to grow naturally, let window scroll */
                transition: background 0.3s;
                font-family: 'Fira Mono', 'Consolas', 'Menlo', 'Monaco', 'Courier New', monospace;
                padding: 0.5em 1.2em 0.5em 1.2em;
            }
        /* Remove underlines from arrows and panel text in all panels */
        .beacon-panel .arrow,
        .beacon-panel .arrow-list li,
        .beacon-panel .arrow-list li span,
        .beacon-panel .section-title,
        .beacon-panel,
        .beacon-panel * {
            text-decoration: none !important;
            -webkit-text-decoration: none !important;
        }
        /* Remove underlines from small text panels too */
        .beacon-small-text-panel .arrow,
        .beacon-small-text-panel .arrow-list li,
        .beacon-small-text-panel .arrow-list li span,
        .beacon-small-text-panel .section-title,
        .beacon-small-text-panel,
        .beacon-small-text-panel * {
            text-decoration: none !important;
            -webkit-text-decoration: none !important;
        }
        /* Remove underlines from all links inside panels */
        .beacon-panel.panel-link,
        .beacon-panel.panel-link:visited,
        .beacon-panel.panel-link:hover,
        .beacon-panel.panel-link:active,
        .beacon-small-text-panel.panel-link,
        .beacon-small-text-panel.panel-link:visited,
        .beacon-small-text-panel.panel-link:hover,
        .beacon-small-text-panel.panel-link:active {
            text-decoration: none !important;
        }
        </style>
        <style>
        :root {
            * {
                box-sizing: border-box;
            }
            --beacon-blue: #6bb6ff;
            --beacon-blue-muted: #3a6fa1;
            --panel-bg: transparent;
            --panel-hover-bg: #0a1a2f;
            --panel-radius: 18px;
            --panel-border: 2px solid var(--beacon-blue-muted);
            --panel-shadow: 0 2px 12px 0 rgba(0,170,255,0.07);
            --panel-padding: 1.2em 1.2em 1.2em 1.2em;
            --panel-title-color: var(--beacon-blue);
            --panel-arrow-color: var(--beacon-primary-light);
            --panel-text-color: #c3c8d1;
            --dot-color: #6bb6ff80;
        }
        .beacon-panel, .beacon-small-text-panel, .beacon-long-expander-panel, .beacon-code-panel {
            background: var(--panel-bg);
            border: var(--panel-border);
            border-radius: var(--panel-radius);
            box-shadow: var(--panel-shadow);
            padding: 0.7em 2.2em 0.7em 2.2em; /* less vertical, more horizontal */
            color: var(--panel-text-color);
            transition: background 0.3s, box-shadow 0.3s, border-color 0.3s;
            text-align: left;
            display: flex;
            flex-direction: column;
            min-width: 0;
            position: relative;
            max-width: 900px;
            width: 54vw;
            margin-left: auto;
            margin-right: auto;
        }
        .beacon-small-text-panel:hover, .beacon-long-expander-panel:hover {
            background: var(--panel-hover-bg);
        }
            .beacon-panel:hover {
                background: var(--panel-hover-bg, #0a1a2f);
            }
        .section-title {
            color: var(--panel-title-color);
            font-weight: 700;
            margin-bottom: 0.1em;
            text-align: left;
            font-size: 1.08em;
        }
        .custom-blue-line {
            height: 2px;
            background: var(--panel-arrow-color);
            border-radius: 1px;
            margin-left: 1em;
            margin-bottom: 1em;
            width: calc(100% - 1em);
        }
        .beacon-long-expander-panel .custom-blue-line {
            width: calc(100% - 1em);
            margin-left: 1em;
            margin-right: 0;
        }
        .arrow {
            color: var(--panel-arrow-color);
            font-weight: 500;
            margin-right: 0.7em;
            font-size: 1.1em;
            text-decoration: none !important;
            text-decoration: none !important;
        }
        .arrow-list li {
            color: var(--panel-text-color);
            font-size: 1em;
            margin-bottom: 0.12em;
            display: flex;
            align-items: center;
            text-decoration: none !important;
        }
        </style>
    <style>
html, body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: #0a0a15;
    color: #ffffff;
    width: 100vw;
    margin: 0;
    padding: 0;
    overflow-x: hidden !important;
    overflow-y: auto !important;
  min-height: 100vh;
}
body::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
        linear-gradient(135deg, rgba(255, 255, 255, 0.18) 0%, rgba(255, 255, 255, 0.12) 30%, rgba(255, 255, 255, 0.06) 60%, transparent 100%),
        linear-gradient(140deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 25%, rgba(255, 255, 255, 0.03) 50%, transparent 75%);
    z-index: 1;
    pointer-events: none;
    animation: lightShift 12s ease-in-out infinite;
}
@keyframes lightShift {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}
body::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
        radial-gradient(1px 1px at 20% 30%, rgba(107, 182, 255, 0.3), transparent),
        radial-gradient(1px 1px at 40% 70%, rgba(255, 255, 255, 0.2), transparent),
        radial-gradient(1px 1px at 90% 40%, rgba(107, 182, 255, 0.2), transparent),
        radial-gradient(1px 1px at 60% 90%, rgba(255, 255, 255, 0.1), transparent);
    background-size: 100px 100px, 80px 80px, 120px 120px, 90px 90px;
    z-index: 1;
    pointer-events: none;
    animation: particleDrift 20s linear infinite;
}
@keyframes particleDrift {
    0% { background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%; }
    100% { background-position: 100% 100%, -100% 100%, 100% -100%, -100% -100%; }
}
    </style>
</head>
<body>
    <header class="beacon-page-header">
        <nav class="beacon-page-nav" style="align-items: center; display: flex; height: 56px;">
            <div style="display: flex; align-items: flex-end;">
                <span style="font-size: 2.1rem; font-weight: 800; color: #fff; letter-spacing: -1px; line-height: 1;">Beacon.</span>
                <span class="beacon-brand-separator" style="color: rgba(255,255,255,0.6); font-size: 1.5rem; margin: 0 4px 0 10px; line-height: 1.1;">|</span>
                <span class="beacon-page-title" style="font-size: 1.25rem; font-weight: 700; color: var(--beacon-blue, #6bb6ff); letter-spacing: -0.5px; align-self: flex-end; line-height: 1.1;">Strategy API.</span>
            </div>
            <div style="flex: 1 1 0%;"></div>
            <div class="beacon-nav-actions" style="align-items: flex-end; display: flex;">
                <input type="text" class="beacon-nav-search" placeholder="Search..." style="padding:8px 14px;border-radius:7px;border:none;outline:none;min-width:170px;background:transparent;color:#fff;font-size:1.08em;height:38px;box-sizing:border-box;align-self:flex-end;">
                <a href="/command-center/index.html" class="beacon-nav-back" style="display: flex; align-items: center; margin-left: 16px; text-decoration: none; color: var(--beacon-blue, #6bb6ff); font-weight: 600; font-size: 1.08em; background: none; border: none; cursor: pointer; padding: 0; transition: color 0.18s;">
                    <span class="beacon-nav-back-arrow arrow" style="font-size: 1.35em; font-weight: 900; margin-right: 6px; display: flex; align-items: center; height: 2.7rem; line-height: 2.7rem; vertical-align: middle; transform: rotate(180deg); transition: color 0.18s;">→</span>
                    Command Center
                </a>
                <div id="infoDropdownMount"></div>
            </div>
        </nav>
        <style>
            .beacon-page-header {
                margin-bottom: 1.5em;
            }
        </style>
    </header>
    <style>
      .beacon-nav-back {
        color: var(--beacon-blue, #6bb6ff) !important;
        transition: color 0.18s;
      }
      .beacon-nav-back .beacon-nav-back-arrow {
        color: var(--beacon-blue, #6bb6ff);
        transition: color 0.18s;
      }
      .beacon-nav-back:hover {
        color: #fff !important;
      }
      .beacon-nav-back:hover .beacon-nav-back-arrow {
        color: #fff;
      }
    </style>
    <div style="padding-top: 3.2em;">
    <h1 style="text-align: center; color: #fff; font-size: 2.2em; font-weight: 800; margin-top: 0.7em; margin-bottom: 0.1em; letter-spacing: -0.03em;">Strategy API.</h1>
    <p style="text-align: center; color: #fff; font-size: 1.15em; font-weight: 400; margin-top: 0.1em; margin-bottom: 0.1em;">See the interface. Plug in your strategy. Test new ideas.</p>
    <div style="width: 100%; margin: 0; display: block;">

  <main class="beacon-page-content">

    <section class="doc-content">
      <div class="beacon-code-panel">
        <div id="code-grid" class="code-grid-demo"></div>
      </div>
      <script>
        // --- Configurable method expanders ---
        const expandableMethods = [
          {
            name: 'onMarketDataReceived',
            signature: 'void onMarketDataReceived(const bo::MarketMessage& msg) override {}',
            expandedSignature: 'void onMarketDataReceived(const bo::MarketMessage& msg) override {',
            todo: [
              '// Reused for cache locality.',
              '// It must be repopulated. Intentionally omitted.',
              '_reusedOrder->reset();',
              '',
              '// This is your method.',
              'process(msg);'
            ]
          },
          {
            name: 'onOrderFilled',
            signature: 'void onOrderFilled(const bo::OrderFill& fill) override {}',
            expandedSignature: 'void onOrderFilled(const bo::OrderFill& fill) override {',
            todo: [
              '// Callback from OrderManager.'
            ]
          },
          {
            name: 'onOrderConfirmed',
            signature: 'void onOrderConfirmed(const bo::Order& order) override {}',
            expandedSignature: 'void onOrderConfirmed(const bo::Order& order) override {',
            todo: [
              '// Callback from OrderManager.'
            ]
          },
          {
            name: 'onOrderRejected',
            signature: 'void onOrderRejected(const bo::OrderRequest& req) override {}',
            expandedSignature: 'void onOrderRejected(const bo::OrderRequest& req) override {',
            todo: [
              '// Callback from OrderManager.'
            ]
          },
          {
            name: 'onExchangeMessageReceived',
            signature: 'void onExchangeMessageReceived(const bo::ExchangeMessage& msg) override {}',
            expandedSignature: 'void onExchangeMessageReceived(const bo::ExchangeMessage& msg) override {',
            todo: [
              '// Callback from OrderManager.',
              '// Simulate exchange halts, violations, etc.',
              '_orderManager->CancelAll();'
            ]
          },
          {
            name: 'onOrderConfirmed',
            signature: 'void onOrderConfirmed(const bo::Order& order) override {}',
            expandedSignature: 'void onOrderConfirmed(const bo::Order& order) override {',
            todo: [
              '// Callback from OrderManager.'
            ]
          }
        ];
        // --- End config ---
        // (removed duplicate assignment)
        const code = `#pragma once\n\n#include <beacon_strategy>\n#include <beacon_order>\n\n// - Namespace abbreviations for readability.\nnamespace bs = beacon_strategy;\nnamespace bo = beacon_order;\n\n// - overrides are for template/concepts.\n// - Some pointer intialization omitted for clarity.\n\nclass ExampleStrategy : public bs::StrategyBase {\npublic:\n    // - Opportunity to read your own .json.\n    explicit ExampleStrategy(const nlohmann::json& config) : bs::StrategyBase(config) {}\n\n    void onMarketDataReceived(const bo::MarketMessage& msg) override {}\n    void onOrderConfirmed(const bo::Order& order) override {}\n    void onOrderFilled(const bo::OrderFill& fill) override {}\n    void onOrderRejected(const bo::OrderRequest& req) override {}\n    void onExchangeMessageReceived(const bo::ExchangeMessage& msg) override {}\n\nprivate:\n    // - All messaging between the strategy and matching engine.\n    // - Ownership is implementation-specific.\n    std::unique_ptr<bo::OrderManager> _orderManager;\n\n    // - Reused for cache locality purposes.\n    bo::Order _reusedOrder;\n};\n\n// - For static template polymorphism.\nREGISTER_ALGORITHM(ExampleStrategy);`;
        let expandedState = {};
        expandableMethods.forEach(m => expandedState[m.name] = false);
        function htmlEscape(str) {
          return str.replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
        }
        function getIndent(line) {
          const match = line.match(/^(\s*)/);
          return match ? match[1] : '';
        }
        // No-op highlighter: just return the line as-is
        function highlightCpp(line) {
          return line;
        }

        function renderGrid() {
          const lines = code.split('\n');
          let html = '';
          for (let i = 0; i < lines.length; ++i) {
            let rawLine = lines[i];
            // Handle empty lines (from double newlines)
            if (rawLine.trim() === '') {
              html += `<div class=\"code-row\"><span class=\"expander invisible\"></span><span>&nbsp;</span></div>`;
              continue;
            }
            let line = htmlEscape(rawLine);
            line = highlightCpp(line);
            let matchedMethod = expandableMethods.find(m => rawLine.trim() === m.signature);
            if (matchedMethod) {
              const triangle = expandedState[matchedMethod.name] ? '▼' : '▶';
              const indent = getIndent(rawLine).replace(/ /g, '&nbsp;');
              if (!expandedState[matchedMethod.name]) {
                html += `<div class=\"code-row\"><span class=\"expander\" data-expander=\"${matchedMethod.name}\">${triangle}</span><span>${indent}<span style=\"color:#6bb6ff;\">${matchedMethod.signature.replace('void ', 'void ')}</span></span></div>`;
              } else {
                html += `<div class=\"code-row\"><span class=\"expander\" data-expander=\"${matchedMethod.name}\">${triangle}</span><span>${indent}<span style=\"color:#6bb6ff;\">${matchedMethod.expandedSignature.replace('void ', 'void ')}</span></span></div>`;
                const bodyIndent = indent + '    ';
                matchedMethod.todo.forEach(lineText => {
                  html += `<div class=\"code-row\"><span class=\"expander invisible\"></span><span>${bodyIndent.replace(/ /g, '&nbsp;')}${htmlEscape(lineText)}</span></div>`;
                });
                html += `<div class=\"code-row\"><span class=\"expander invisible\"></span><span>${indent.replace(/ /g, '&nbsp;')}}</span></div>`;
                if (lines[i+1] && lines[i+1].trim() === '}') {
                  i++;
                }
              }
            } else {
              const indent = getIndent(rawLine).replace(/ /g, '&nbsp;');
              html += `<div class=\"code-row\"><span class=\"expander invisible\"></span><span>${indent}${line.trim()}</span></div>`;
            }
          }
          return html;
        }
        function updateGrid() {
          document.getElementById('code-grid').innerHTML = renderGrid();
        }
        document.getElementById('code-grid').onclick = function(e) {
          const expander = e.target.closest('.expander');
          if (expander && expander.dataset.expander) {
            const method = expander.dataset.expander;
            expandedState[method] = !expandedState[method];
            updateGrid();
          }
        };
        updateGrid();
      </script>
    </section>
  </main>

    <script src="/assets/js/info-dropdown.js"></script>
    <script>
        function showSearchIfResults() {
            if (document.querySelector('.beacon-search-field').value.trim()) performSearch();
        }
        function hideSearchDelayed() {
            setTimeout(() => {
                document.querySelector('.beacon-search-results').style.display = 'none';
            }, 300);
        }
        function performSearch(query = document.querySelector('.beacon-search-field').value) {

        }
        // Mission Accordion JS
        function toggleMissionDetail(idx) {
            const items = document.querySelectorAll('.mission-item');
            const details = document.querySelectorAll('.mission-detail');
            if (!items[idx] || !details[idx]) return;
            const isActive = items[idx].classList.contains('active');
            // Collapse all
            items.forEach(i => i.classList.remove('active'));
            details.forEach(d => d.classList.add('hidden'));
            // Expand if not already active
            if (!isActive) {
                items[idx].classList.add('active');
                details[idx].classList.remove('hidden');
            }
        }
    </script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"e5b34c3bd1a84655a159a87c206343e7","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>